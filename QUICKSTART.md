# Me Feed - Quick Start Guide

Get the Me Feed backend running in 5 minutes!

## Prerequisites

- Python 3.11+
- Docker & Docker Compose

## Option 1: Automated Setup (Recommended)

### Windows (PowerShell)
```powershell
# Run setup script
.\scripts\setup.ps1
```

### Linux/Mac (Bash)
```bash
# Make script executable
chmod +x scripts/setup.sh

# Run setup script
./scripts/setup.sh
```

The script will:
1. Check Python and Docker
2. Generate security keys
3. Create `.env` file
4. Create virtual environment
5. Install dependencies
6. Start Docker services
7. Run database migrations

## Option 2: Manual Setup

### Step 1: Generate Security Keys

```bash
# Simple version (uses OpenSSL - no Python dependencies)
python scripts/generate_keys_simple.py

# Copy the SECRET_KEY shown and it will be used in next step
```

### Step 2: Configure Environment

```bash
# Copy example environment
cp .env.example .env

# Edit .env and add the SECRET_KEY from generate_keys_simple.py output
# The script will print: "Add this to your .env: SECRET_KEY=..."
```

### Step 3: Start Services

```bash
# Start database and Redis
docker-compose up -d db redis

# Wait for services to be ready (about 10 seconds)
```

### Step 4: Setup Python Environment

```bash
# Create virtual environment
python -m venv venv

# Activate it
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows

# Install dependencies
cd backend
pip install -r requirements.txt
```

### Step 5: Run Database Migrations

```bash
# From backend directory
alembic upgrade head
```

### Step 6: Start Backend

```bash
# From backend directory
uvicorn app.main:app --reload
```

## Verify Installation

### 1. Check Health Endpoint

```bash
curl http://localhost:8000/health
```

Expected response:
```json
{
  "status": "healthy",
  "service": "Me Feed",
  "version": "1.1.0"
}
```

### 2. Access API Documentation

Open in browser: http://localhost:8000/docs

### 3. Test User Registration

```bash
curl -X POST http://localhost:8000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "TestPass123!"
  }'
```

Expected response:
```json
{
  "id": "...",
  "email": "test@example.com",
  "email_verified": true,
  "created_at": "...",
  "last_login_at": null
}
```

### 4. Test Login

```bash
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "TestPass123!"
  }'
```

Expected response:
```json
{
  "access_token": "eyJhbGc...",
  "refresh_token": "eyJhbGc...",
  "token_type": "bearer",
  "expires_in": 900
}
```

### 5. Test Authenticated Endpoint

```bash
# Replace YOUR_ACCESS_TOKEN with token from login
curl http://localhost:8000/api/auth/me \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

## Common Issues

### Issue: "FileNotFoundError: JWT private key not found"

**Solution**: Run `python scripts/generate_keys.py` to generate security keys.

### Issue: "Connection refused" to database

**Solution**:
```bash
# Check if PostgreSQL is running
docker-compose ps

# If not, start it
docker-compose up -d db
```

### Issue: "ImportError: No module named 'app'"

**Solution**: Make sure you're in the `backend` directory and virtual environment is activated.

### Issue: Rate limit exceeded during testing

**Solution**:
```bash
# Restart Redis to clear rate limit cache
docker-compose restart redis
```

### Issue: "SECRET_KEY must be at least 32 characters"

**Solution**: Update `.env` file with the SECRET_KEY generated by `generate_keys.py`.

## Docker-Only Setup

If you prefer to run everything in Docker:

```bash
# Generate keys first (outside Docker)
python scripts/generate_keys.py

# Copy .env.example to .env and update SECRET_KEY
cp .env.example .env
# Edit .env manually

# Start all services
docker-compose up -d

# Check logs
docker-compose logs -f backend

# Run migrations inside container
docker-compose exec backend alembic upgrade head
```

## Development Workflow

### Making Code Changes

1. Edit files in `backend/app/`
2. Backend auto-reloads if using `--reload` flag
3. Check logs for errors

### Database Changes

```bash
# Create new migration
alembic revision --autogenerate -m "description"

# Review migration in alembic/versions/
# Then apply it
alembic upgrade head
```

### Stopping Services

```bash
# Stop all Docker services
docker-compose down

# Stop and remove volumes (deletes database!)
docker-compose down -v
```

## Next Steps

1. ‚úÖ Backend running successfully
2. üìñ Read [README.md](README.md) for full documentation
3. üîç Explore API at http://localhost:8000/docs
4. üöÄ **Start Phase 2B: Frontend MVP** (see [MVP_ROADMAP.md](MVP_ROADMAP.md))
5. üìä See [PROJECT_STATUS.md](PROJECT_STATUS.md) for current progress

## What's Working Now

**Backend APIs** (Test with curl or Postman):
- ‚úÖ User Registration & Login
- ‚úÖ JWT Authentication
- ‚úÖ CSV Import (Netflix format)
- ‚úÖ Import Status Tracking
- ‚úÖ Import History

**What's Coming Next (Week 3B)**:
- üöß Web Interface (Login/Register pages)
- üöß CSV Upload UI
- üöß Media Library View
- üöß Responsive Design

**See the full roadmap**: [MVP_ROADMAP.md](MVP_ROADMAP.md)

## Support

- **Documentation**: See [README.md](README.md)
- **Technical Spec**: See [TECHNICAL_SPEC v1.1.md](TECHNICAL_SPEC%20v1.1.md)
- **Status**: See [PROJECT_STATUS.md](PROJECT_STATUS.md)

---

**Estimated Setup Time**: 5-10 minutes
**Difficulty**: Beginner-friendly
